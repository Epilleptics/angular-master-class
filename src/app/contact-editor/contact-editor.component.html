<div class="trm-contacts-editor" *ngIf="contact$ | async as contact; else loading">
  <md-card>
    <md-card-title-group class="fullBleed editing">
      <img md-card-md-image [src]="contact.image">
      <md-card-title>{{contact.name}}</md-card-title>
      <md-card-subtitle>{{contact.email}}</md-card-subtitle>
    </md-card-title-group>
    <md-card-content>
      <div fxLayout="column">
        <trm-tabs>
          <trm-tab title="General" fxLayout="column">
            <md-input-container fxFlex>
              <input mdInput [(ngModel)]="contact.name" placeholder="Name" name="name">
            </md-input-container>
            <md-input-container fxFlex>
              <input mdInput [(ngModel)]="contact.email" placeholder="Email" name="email">
            </md-input-container>
            <md-input-container fxFlex>
              <input mdInput [(ngModel)]="contact.phone" placeholder="Phone" name="phone">
            </md-input-container>
            <md-input-container fxFlex>
              <input mdInput [(ngModel)]="contact.website" placeholder="Website" name="website">
            </md-input-container>
            <md-input-container fxFlex>
              <input mdInput [(ngModel)]="contact.birthday" placeholder="Birthday" name="birthday" type="date">
            </md-input-container>
          </trm-tab>
          <trm-tab title="Address" fxLayout="column">
            <fieldset fxLayout="column">
              <legend>Address</legend>
              <md-input-container fxFlex>
                <input mdInput [(ngModel)]="contact.address.street" placeholder="Street" name="street">
              </md-input-container>
              <md-input-container fxFlex>
                <input mdInput [(ngModel)]="contact.address.zip" placeholder="Zip" name="zip">
              </md-input-container>
              <md-input-container fxFlex>
                <input mdInput [(ngModel)]="contact.address.city" placeholder="City" name="city">
              </md-input-container>
            </fieldset>
          </trm-tab>
        </trm-tabs>
      </div>
    </md-card-content>
    <md-card-actions fxLayout fxLayoutAlign="center center">
      <button md-button (click)="save(contact)" title="Save contact">Save</button>
      <button md-button (click)="back()" title="Cancel editing">Cancel</button>
    </md-card-actions>
  </md-card>
</div>
<ng-template #loading>
  <svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" class="lds-blank">
    <circle cx="50" cy="50" fill="none" r="46" stroke="#3be8b0" stroke-width="5">
      <animate attributeName="stroke-dasharray" calcMode="linear" values="0 0 0 144.51326206513048 0 144.51326206513048;0 0 144.51326206513048 0 0 144.51326206513048;0 0 144.51326206513048 0 0 144.51326206513048;0 144.51326206513048 0 144.51326206513048 0 144.51326206513048;0 144.51326206513048 0 144.51326206513048 0 144.51326206513048" keyTimes="0;0.2;0.4;0.6;1" dur="1" begin="-1s" repeatCount="indefinite"></animate>
    </circle>
    <circle cx="50" cy="50" fill="none" r="40" stroke="#1aafd0" stroke-width="5">
      <animate attributeName="stroke-dasharray" calcMode="linear" values="0 0 0 125.66370614359172 0 125.66370614359172;0 0 125.66370614359172 0 0 125.66370614359172;0 0 125.66370614359172 0 0 125.66370614359172;0 125.66370614359172 0 125.66370614359172 0 125.66370614359172;0 125.66370614359172 0 125.66370614359172 0 125.66370614359172" keyTimes="0;0.2;0.4;0.6;1" dur="1" begin="-0.92s" repeatCount="indefinite"></animate>
    </circle>
    <circle cx="50" cy="50" fill="none" r="34" stroke="#6a67ce" stroke-width="5">
      <animate attributeName="stroke-dasharray" calcMode="linear" values="0 0 0 106.81415022205297 0 106.81415022205297;0 0 106.81415022205297 0 0 106.81415022205297;0 0 106.81415022205297 0 0 106.81415022205297;0 106.81415022205297 0 106.81415022205297 0 106.81415022205297;0 106.81415022205297 0 106.81415022205297 0 106.81415022205297" keyTimes="0;0.2;0.4;0.6;1" dur="1" begin="-0.84s" repeatCount="indefinite"></animate>
    </circle>
    <g transform="rotate(180 50 50)">
      <circle cx="50" cy="50" fill="none" r="46" stroke="#3be8b0" stroke-width="5">
        <animate attributeName="stroke-dasharray" calcMode="linear" values="0 0 0 144.51326206513048 0 144.51326206513048;0 0 144.51326206513048 0 0 144.51326206513048;0 0 144.51326206513048 0 0 144.51326206513048;0 144.51326206513048 0 144.51326206513048 0 144.51326206513048;0 144.51326206513048 0 144.51326206513048 0 144.51326206513048" keyTimes="0;0.2;0.4;0.6;1" dur="1" begin="-0.43999999999999995s" repeatCount="indefinite"></animate>
      </circle>
      <circle cx="50" cy="50" fill="none" r="40" stroke="#1aafd0" stroke-width="5">
        <animate attributeName="stroke-dasharray" calcMode="linear" values="0 0 0 125.66370614359172 0 125.66370614359172;0 0 125.66370614359172 0 0 125.66370614359172;0 0 125.66370614359172 0 0 125.66370614359172;0 125.66370614359172 0 125.66370614359172 0 125.66370614359172;0 125.66370614359172 0 125.66370614359172 0 125.66370614359172" keyTimes="0;0.2;0.4;0.6;1" dur="1" begin="-0.52s" repeatCount="indefinite"></animate>
      </circle>
      <circle cx="50" cy="50" fill="none" r="34" stroke="#6a67ce" stroke-width="5">
        <animate attributeName="stroke-dasharray" calcMode="linear" values="0 0 0 106.81415022205297 0 106.81415022205297;0 0 106.81415022205297 0 0 106.81415022205297;0 0 106.81415022205297 0 0 106.81415022205297;0 106.81415022205297 0 106.81415022205297 0 106.81415022205297;0 106.81415022205297 0 106.81415022205297 0 106.81415022205297" keyTimes="0;0.2;0.4;0.6;1" dur="1" begin="-0.64s" repeatCount="indefinite"></animate>
      </circle>
    </g>
  </svg>
</ng-template>
